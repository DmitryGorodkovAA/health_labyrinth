<script>
document.addEventListener('DOMContentLoaded', function() {
    const chartId = 'chart-{{ forecast.id }}';
    const ctx = document.getElementById(chartId).getContext('2d');

    // Данные из Django
    const points = {{ forecast.points|safe }};
    const labels = points.map(point => point.age);
    const data = points.map(point => point.percent);

    new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
                label: 'Вероятность (%)',
                data: data,
                borderColor: '#004A3D',
                fill: false,
                tension: 0.1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    title: { display: true, text: '%' }
                },
                x: {
                    title: { display: true, text: 'Возраст' }
                }
            }
        }
    });
});
</script>